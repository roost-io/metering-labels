# ********RoostGPT********
# Test generated by RoostGPT for test metering-csv using AI Type Azure Open AI and AI Model roost-gpt4-32k

# Test generated for /v2.0/metering/metering-label-rules_post for http method type POST in artillery framework
# RoostTestHash=067b623f58



# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "metering-label-rules_post_others.csv"
    fields:
      - "invalidMeteringId"
    skipHeader: true
  defaults:
    headers:
      authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
  
scenarios:
  - name: Test non-successful API responses
    flow:
      # Test POST request with invalid payload
      - post:
          url: "/v2.0/metering/metering-label-rules"
          json:
            label_rule:
              metering_id: "{{ invalidMeteringId }}"
          expect:
            - statusCode: 400
            - hasProperty: 'error'
          think: 2

      # Test not authorized request
      - post:
          url: "/v2.0/metering/metering-label-rules"
          headers:
            authorization: "invalid_token"
          json:
            label_rule:
              metering_id: "1234"
          expect:
            - statusCode: 401 
            - hasProperty: 'error'
          think: 2

      # Test not found URL
      - post:
          url: "/invalid-url"
          json:
            label_rule:
              metering_id: "1234"
          expect:
            - statusCode: 404
          think: 2

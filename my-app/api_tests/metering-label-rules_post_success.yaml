# ********RoostGPT********
# Test generated by RoostGPT for test metering-csv using AI Type Azure Open AI and AI Model roost-gpt4-32k

# Test generated for /v2.0/metering/metering-label-rules_post for http method type POST in artillery framework
# RoostTestHash=067b623f58



# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 10
      arrivalRate: 10
  payload:
    path: "metering-label-rules_post_success.csv"
    fields:
      - "remote_ip_prefix"
      - "direction"
      - "metering_label_id"
      - "id"
      - "excluded"
    skipHeader: true
  plugins:
    expect: {}
scenarios:
  - name: POST /v2.0/metering/metering-label-rules
    flow:
    # Test POST /v2.0/metering/metering-label-rules
    - post:
        url: "/v2.0/metering/metering-label-rules"
        headers:
          Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
        json: 
          metering_label_rule:
            remote_ip_prefix: "{{ remote_ip_prefix }}"
            direction: "{{ direction }}"
            metering_label_id: "{{ metering_label_id }}"
            id: "{{ id }}"
            excluded: "{{ excluded }}"
        expect:
        - statusCode: 201        # success response
        - hasProperty: "metering_label_rule"  # check if response body has 'metering_label_rule' property 
        - hasHeader: "Content-Type"  # check if header has 'Content-Type' field
        - headerEquals: ['Content-Type','application/json']  # verify 'Content-Type' header value is 'application/json'
        - equals: ["body.metering_label_rule.remote_ip_prefix", "{{ remote_ip_prefix }}"]
        - equals: ["body.metering_label_rule.direction", "{{ direction }}"]
        - equals: ["body.metering_label_rule.metering_label_id", "{{ metering_label_id }}"]
        - equals: ["body.metering_label_rule.id", "{{ id }}"]
        - equals: ["body.metering_label_rule.excluded", "{{ excluded }}"]
      think: 2

# ********RoostGPT********
# Test generated by RoostGPT for test metering-csv using AI Type Azure Open AI and AI Model roost-gpt4-32k

# Test generated for /v2.0/metering/metering-labels/{metering_label_id}_delete for http method type DELETE in artillery framework
# RoostTestHash=b1a615d400



# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "metering-labels_metering_label_id_delete_others.csv"
    fields: ["metering_label_id"]
    skipHeader: true

scenarios:
  - name: "Risk Assessment for API Endpoint : DELETE non existing /v2.0/metering/metering-labels/{metering_label_id}"
    flow:
      # Attempt to delete a nonexistent metering label, expect 404 status code
      - delete:
          url: "/v2.0/metering/metering-labels/{{ metering_label_id }}"
          headers: 
            authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 404
          think: 2

      # Attempt to delete with invalid metering label id format, expect 400 status code
      - delete:
          url: "/v2.0/metering/metering-labels/invalid_id"
          headers: 
            authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 400
          think: 2

      # Attempt to delete with missing authorization header, expect 401 status code
      - delete:
          url: "/v2.0/metering/metering-labels/{{ metering_label_id }}"
          expect:
            - statusCode: 401
            - headers: 
                - exists: "WWW-Authenticate"
          think: 2

      # Attempt to delete without correct permissions, expect 403 status code
      - delete:
          url: "/v2.0/metering/metering-labels/{{ metering_label_id }}"
          headers: 
            authorization: "Bearer incorrect_token"
          expect:
            - statusCode: 403
          think: 2

      # Attempt to delete at a nonexistent endpoint, expect 404 status code
      - delete:
          url: "/invalid/endpoint"
          headers: 
            authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 404
          think: 2

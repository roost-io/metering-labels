# ********RoostGPT********
# Test generated by RoostGPT for test metering-csv using AI Type Azure Open AI and AI Model roost-gpt4-32k

# Test generated for /v2.0/metering/metering-labels_get for http method type GET in artillery framework
# RoostTestHash=3dcb871c88



# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 40
      arrivalRate: 5
  plugins:
    expect: { }  
  payload:
    path: "metering-labels_get_others.csv"
    skipHeader: true
    fields: ["field1", "field2", "field3"]

scenarios:
  - name: "Non-Success Responses"
    flow:
      - post:
          url: "/v2.0/metering/metering-labels"
          headers: 
              Authorization: "Invalid_Token"
              Content-Type: "application/json"
          json:
              field1: "{{field1}}"
              field2: "{{field2}}"
              field3: "{{field3}}"
          expect:
            - statusCode: 401  # expects unauthorized error
        think: 2

      - post:
          url: "/invalid_url"
          headers: 
            Authorization: "{{$processEnvironment.AUTH_TOKEN}}"
            Content-Type: "application/json"
          json:
            field1: "{{field1}}"
            field2: "{{field2}}"
            field3: "{{field3}}"
          expect:
            - statusCode: 404  # expects not found error
        think: 2


      - post:
          url: "/v2.0/metering/metering-labels"
          headers: 
            Authorization: "{{$processEnvironment.AUTH_TOKEN}}"
            Content-Type: "application/json"
          json:
            field1: "{{field1}}"
          expect:
            - statusCode: 400  # expects bad request error
        think: 2

      - post:
          url: "/v2.0/metering/metering-labels"
          headers: 
            Authorization: "{{$processEnvironment.AUTH_TOKEN}}"
            Content-Type: "application/json"
          json:
            field1: 123  #sending integer instead of string
            field2: "{{field2}}"
            field3: "{{field3}}"
          expect:
            - statusCode: 422  # expects Unprocessable Entity error
        think: 2

      - post:
          url: "/v2.0/metering/metering-labels"
          headers: 
            Authorization: "Invalid_Token"
            Content-Type: "application/json"
          json:
            field1: "{{field1}}"
            field2: "{{field2}}"
            field3: "{{field3}}"
          expect:
            - statusCode: 500  # expects internal server error
        think: 2

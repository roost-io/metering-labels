# ********RoostGPT********
# Test generated by RoostGPT for test metering-integration using AI Type Azure Open AI and AI Model roost-gpt4-32k
# 
# 
# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}/v2.0/metering"
  phases:
    - duration: 60
      arrivalRate: 10
  plugins:
    expect: {}
  payload:
    path: "scenario-2743c8c5f6.csv"
    fields:
      - "remote_ip_prefix"
      - "direction"
      - "metering_label_id"
      - "id"
      - "excluded"
    skipHeader: true

scenarios:
  # Scenario for List Metering Label Rules
  - name: "Scenario: List Metering Label Rules"
    flow:
      - log: "Given the API is available"
      - get: 
          url: "/metering-label-rules"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 200
            - hasProperty: 'metering-label-rules'
            - equals:
                metering-label-rules.0.remote_ip_prefix: "{{ remote_ip_prefix }}"
                metering-label-rules.0.direction: "{{ direction }}"
                metering-label-rules.0.metering_label_id: "{{ metering_label_id }}"
                metering-label-rules.0.id: "{{ id }}"
                metering-label-rules.0.excluded: "{{ excluded }}"
      - think: 1

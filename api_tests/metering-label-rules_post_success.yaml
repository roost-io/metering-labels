# ********RoostGPT********
# Test generated by RoostGPT for test metering-csv using AI Type Vertex AI and AI Model code-bison-32k

# Test generated for /v2.0/metering/metering-label-rules_post for http method type POST in artillery framework
# RoostTestHash=067b623f58



# ********RoostGPT********
config:
  target: {{ $processEnvironment.API_HOST }}

scenarios:
  Successful_API_Requests:
    flow:
      # Create Metering Label Rule
      - get:
          url: "/v2.0/metering/metering-label-rules"
          description: Retrieve metering label rules
          expect:
            - statusCode: 200
            - contentType: application/json
            - hasHeader: X-Total-Count
            - hasHeader: Content-Type

      - think: 500ms
      - post:
          url: "/v2.0/metering/metering-label-rules"
          headers:
            Authorization: Bearer {{ $processEnvironment.AUTH_TOKEN }}
            Content-Type: application/json
          payload:
            metering_label_rule:
              remote_ip_prefix: 10.0.1.0/24
              direction: ingress
              metering_label_id: e131d186-b02d-4c0b-83d5-0c0725c4f812
          description: Create metering label rule
          expect:
            - statusCode: 201
            - contentType: application/json
            - hasProperty: metering_label_rule.remote_ip_prefix
            - equals: metering_label_rule.remote_ip_prefix 10.0.1.0/24
            - hasProperty: metering_label_rule.direction
            - equals: metering_label_rule.direction ingress
            - hasProperty: metering_label_rule.metering_label_id
            - equals: metering_label_rule.metering_label_id e131d186-b02d-4c0b-83d5-0c0725c4f812
            - hasProperty: metering_label_rule.excluded
            - equals: metering_label_rule.excluded false
